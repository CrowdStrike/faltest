language: node_js
node_js:
- '8'
branches:
  only:
  - master
  # npm version tags
  - /^(?:[a-z-]+|@[a-z-]+\/[a-z-]+)@\d+\.\d+\.\d+$/
addons:
  chrome: stable
jobs:
  include:
  - stage: lint
    if: type = pull_request
    script:
    - yarn lint:git
    - yarn lint:md
    - yarn lint:js
  - stage: test
    env:
    - DEBUG=remote* WEBDRIVER_HEADLESS=true FIREFOX_INSTALLED=true
  - name: Examples
    services:
    - xvfb
    env:
    - DEBUG=remote* WEBDRIVER_HEADLESS=false
    script:
    - yarn test:examples
